<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>carrousel-list test</title>

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../carrousel-list.html">
    <link rel="import" href="../carrousel-list-item.html">
  </head>
  <body>
    <test-fixture id="basic">
      <template>
        <carrousel-list seconds="2">
          <carrousel-list-item id="row1">Row 1</carrousel-list-item>
          <carrousel-list-item id="row2">Row 2</carrousel-list-item>
          <carrousel-list-item id="row3">Row 3</carrousel-list-item>
          <carrousel-list-item id="row4">Row 4</carrousel-list-item>
          <carrousel-list-item id="row5">Row 5</carrousel-list-item>
          <carrousel-list-item id="row6">Row 6</carrousel-list-item>
        </carrousel-list>
      </template>
    </test-fixture>

    <script>
      suite('carrousel-list', function() {
        var element;
        var row1, row2, row3, row4, row5, row6;

        setup(function () {
          element = fixture("basic");
          row1 = element.firstChild.nextElementSibling;
          row2 = row1.nextElementSibling;
          row3 = row2.nextElementSibling;
          row4 = row3.nextElementSibling;
          row5 = row4.nextElementSibling;
          row6 = row5.nextElementSibling;
        });

        test('A01: Instantiating the TWO elements works', function() {
          assert.equal(element.is, 'carrousel-list');
          assert.equal(element.nodeName, 'CARROUSEL-LIST');
          assert.equal(row1.nodeName, 'CARROUSEL-LIST-ITEM');
          assert.equal(row2.nodeName, 'CARROUSEL-LIST-ITEM');
          assert.equal(row3.nodeName, 'CARROUSEL-LIST-ITEM');
          assert.equal(row4.nodeName, 'CARROUSEL-LIST-ITEM');
          assert.equal(row5.nodeName, 'CARROUSEL-LIST-ITEM');
          assert.equal(row6.nodeName, 'CARROUSEL-LIST-ITEM');
        });

        test('B01: Default behavior - initialisation', function(done) {
          var h = 83; // Cummulative height of the elements
          // Wait for animation to setup
          // No CHILD elements visible at start

          setTimeout(function () {
            expect(row1.style.display).to.be.equal('none');
            //expect(row1.style.top).to.be.equal(h + 'px');
            h += 15;

            expect(row2.style.display).to.be.equal('none');
            //expect(row2.style.top).to.be.equal(h + 'px');
            h += 15;

            expect(row3.style.display).to.be.equal('none');
            //expect(row3.style.top).to.be.equal(h + 'px');
            h += 15;

            expect(row4.style.display).to.be.equal('none');
            //expect(row4.style.top).to.be.equal(h + 'px');
            h += 15;

            expect(row5.style.display).to.be.equal('none');
            //expect(row5.style.top).to.be.equal(h + 'px');
            h += 15;

            expect(row6.style.display).to.be.equal('none');
            //expect(row6.style.top).to.be.equal(h + 'px');

            done();
          }, 100);
        });

        test('B02: Default behavior - first animation', function(done) {
          var h = 0;



          // Animation TIMER 'seconds' is setup for 2 sec.
          // This will check the first animation sequence.
          // No.6 op top, No.1 second, No 3 is not shown.
          setTimeout(function () {
console.log(element, row1);
          document.addEventListener('carrousel-animation-end', function (e) {
            console.log("PSP");
console.log(row1.getAttribute("style"), row1);
console.log(row6.getAttribute("style"), row6);
            done();
          });


/*
console.log(row1.getAttribute("style"), row1);
console.log(row6.getAttribute("style"), row6);

            expect(row6.style.display).to.be.equal('');
            expect(row6.style.top).to.be.equal(h + 'px');
            h += 195;

            expect(row1.style.display).to.be.equal('none');
            expect(row1.style.top).to.be.equal(h + 'px');
            h += 15;

            expect(row2.style.display).to.be.equal('none');
            expect(row2.style.top).to.be.equal(h + 'px');
            h += 15;

            expect(row3.style.display).to.be.equal('none');
            expect(row3.style.top).to.be.equal(h + 'px');
            h += 15;

            expect(row4.style.display).to.be.equal('none');
            expect(row4.style.top).to.be.equal(h + 'px');
            h += 15;

            expect(row5.style.display).to.be.equal('none');
            expect(row5.style.top).to.be.equal(h + 'px');


//            done();
*/

          }, 100);

        });

      });
    </script>
  </body>
</html>
